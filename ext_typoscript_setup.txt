# POWERMAIL PLUGIN #
plugin.tx_powermail_pi1 {
	# get constants
	template.fieldWrap = {$plugin.powermail.template.fieldWrap}
	template.formWrap = {$plugin.powermail.template.formWrap}
	template.thxMessage = {$plugin.powermail.template.thxMessage}
	template.emails = {$plugin.powermail.template.emails}
	template.confirmation = {$plugin.powermail.template.confirmation}
	template.all = {$plugin.powermail.template.all}
	template.mandatory = {$plugin.powermail.template.mandatory}
	template.MultipleJS = {$plugin.powermail.template.MultipleJS}
	allow.email2receiver = {$plugin.powermail.allow.email2receiver}
	allow.email2sender = {$plugin.powermail.allow.email2sender}
	allow.dblog = {$plugin.powermail.allow.dblog}
	emailformat.recipient_mail = {$plugin.powermail.emailformat.recipient_mail}
	emailformat.sender_mail = {$plugin.powermail.emailformat.sender_mail}
	
	enable.unique = {$plugin.powermail.enable.unique}
	email.noreply = {$plugin.powermail.email.noreply}
	email.checkMX = {$plugin.powermail.email.checkMX}
	email.overwritesender = {$plugin.powermail.email.overwritesender}
	hiddenfields.show = {$plugin.powermail.hiddenfields.show}
	markerALL.hideLabel = {$plugin.powermail.markerALL.hideLabel}
	markerALL.notIn = {$plugin.powermail.markerALL.notIn}
	PID.dblog = {$plugin.powermail.PID.dblog}
	form.method = {$plugin.powermail.form.method}
	format.datetime = {$plugin.powermail.format.datetime}
	format.date = {$plugin.powermail.format.date}
	label.allowTags = {$plugin.powermail.label.allowTags}
	html.removeXSS = {$plugin.powermail.html.removeXSS}
	countryselect.charset = {$plugin.powermail.countryselect.charset}
	mandatory.symbol = {$plugin.powermail.mandatory.symbol}
	mandatory.wrap = {$plugin.powermail.mandatory.wrap}
	captcha.use = {$plugin.powermail.captcha.use}
	pagebrowser.wrap = {$plugin.powermail.pagebrowser.wrap}
	upload.folder = {$plugin.powermail.upload.folder}
	upload.file_extensions = {$plugin.powermail.upload.file_extensions}
	upload.filesize = {$plugin.powermail.upload.filesize}
	upload.attachment = {$plugin.powermail.upload.attachment}
	clear.session = {$plugin.powermail.clear.session}
	js.mandatorycheck = {$plugin.powermail.js.mandatorycheck}
	js.mandatorydivclass = {$plugin.powermail.js.mandatorydivclass}
	js.onfocus = {$plugin.powermail.js.onfocus}
	js.Prototype = {$plugin.powermail.js.Prototype}
	js.HTMLentities = {$plugin.powermail.js.HTMLentities}
	field.checkboxJS = {$plugin.powermail.field.checkboxJS}
	rte.parse = {$plugin.powermail.rte.parse}
	powermail.charset = {$plugin.powermail.powermail.charset}
	barrier-free.tabindex = {$plugin.powermail.barrier-free.tabindex}
	barrier-free.accesskey = {$plugin.powermail.barrier-free.accesskey}
	geoip.file = {$plugin.powermail.geoip.file}
	geoip.addValuesToMarkerALL = {$plugin.powermail.geoip.addValuesToMarkerALL}
	debug.output = {$plugin.powermail.debug.output}
	
	
	# adding (or changing) flexible locallang markers in any HTML template or RTE field (example)
	_LOCAL_LANG.en {
		locallangmarker_yourvalue = this is a new text
	}
	
	
	# adding flexible typoscript markers in any HTML template or RTE field (example)
	dynamicTyposcript {
		yourmarker = TEXT
		yourmarker.value = This is a new text
	}
	
	
	# prefilling form fields (example)
	prefill {
		# fill field uid997 with a static text
		uid997 = TEXT
		uid997.value = example value
		
		# fill field uid998 with current timestamp
		uid998 = TEXT
		uid998.data = date:U
		
		# fill field uid998 with current date like "Date: 20.01.2009"
		uid996 = TEXT
		uid996.data = date:U
		uid996.strftime = Date: %d.%m.%Y
		
		# fill field uid995 with IP address of the user
		uid995 = TEXT
		uid995.data = getIndpEnv:REMOTE_ADDR
	}
	
	
	
	# extern db entry (example for tt_adress)
	dbEntry {
		# enable or disable db entry for tt_address
#		tt_address._enable = TEXT
#		tt_address._enable.value = 1
		
		# add mm relation to uid 2 of tt_address_group (via mm table)
#		tt_address._mm = COA
#		tt_address._mm.10 = COA
			# 1 is always the mm table
#		tt_address._mm.10.1 = TEXT
#		tt_address._mm.10.1.value = tt_address_group_mm
			# 2 is always the other table
#		tt_address._mm.10.2 = TEXT
#		tt_address._mm.10.2.value = tt_address_group
			# 3 is always the uid of the other table to get a relation to this (in this case uid2 of tt_address_group)
#		tt_address._mm.10.3 = TEXT
#		tt_address._mm.10.3.value = 2
	
		# table "tt_address" with field "email" is a static value => alexander.kellner@einpraegsam.net
#		tt_address.email = TEXT
#		tt_address.email.value = alexander.kellner@einpraegsam.net
	
		# table "tt_address" with field "pid" is the current pid (e.g. 12)
#		tt_address.pid = TEXT
#		tt_address.pid.field = uid
		
		# table "tt_address" with field "tstamp" is the current time as timestamp (like 123456789)
#		tt_address.tstamp = TEXT
#		tt_address.tstamp.data = date:U
		
		# table "tt_address" with field "address" is the current formatted time (like "Date: 20.01.2009")
#		tt_address.address = TEXT
#		tt_address.address.data = date:U
#		tt_address.address.strftime = Date: %d.%m.%Y
		
		# table "tt_address" with field "name" is the value from powermail (tt_content uid 88) field uid18 (###uid18###)
#		tt_address.name = TEXT
#		tt_address.name.data = TSFE:fe_user|sesData|powermail_88|uid18
		
		# table "tt_address" with field "last_name" is the value from powermail (tt_content uid 88) field uid18 (###uid18###)
#		tt_address.last_name = TEXT
#		tt_address.last_name.data = TSFE:fe_user|sesData|powermail_88|uid18
		
		# table "tt_address" with field "company" is the value from powermail (tt_content uid 88) field uid21_1 (###uid21_1###) (e.g. a checkbox value)
#		tt_address.company = TEXT
#		tt_address.company.data = TSFE:fe_user|sesData|powermail_88|uid21|1
	}
	
}



# TypeNum 3131 offers a dynamic javascript for powermail which allows to validate different fields
powermailJS = PAGE
powermailJS {
	typeNum = 3131
	10 < plugin.tx_powermail_pi1
	
	config {
		disableAllHeaderCode = 1
		xhtml_cleaning = 0
		admPanel = 0
	}
}